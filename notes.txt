## Docker

  # Start ELK cluster.
  sudo docker-compose -f /vagrant/docker-compose.yml up -d

  # Stop ELK cluster.
  sudo docker-compose -f /vagrant/docker-compose.yml stop

  # Restart ELK cluster.
  sudo docker-compose -f /vagrant/docker-compose.yml restart

## ELK Cluster

  # Scale up elasticsearch nodes.
  sudo docker-compose scale esnode=2

  # Get cluster status
  curl -XGET 'http://localhost:9200/_cluster/state?pretty'

  # Get all indexes.
  curl -XGET 'http://localhost:9200/_all?pretty'

  # Get info on specific index.
  curl -XGET 'http://localhost:9200/<index_name>/?pretty'

## Curator

  # Get all indexes.
  curator --host localhost show indices --timestring %Y.%m.%d

  # Get all indexes older than 10 days.
  curator --host localhost show indices --timestring %Y.%m.%d --time-unit days --older-than 10

  # Close all indexes older than 10 days.
  curator --host localhost close indices --timestring %Y.%m.%d --time-unit days --older-than 10

  # Open all indexes.
  curator --host localhost open indices --all-indices

  # Open all indexes older than 10 days
  curator --host localhost open indices --timestring %Y.%m.%d --time-unit days --older-than 10

## Kibanana build

You can now setup the kibanana development environment. Note: you will be asked for your credentials.

    mkdir src && cd src/
    git clone https://git.kumina.nl/kibanana/kibanana-project.git
    virtualenv --system-site-packages kibanana-project

Because you have no access to your ssh keys from this environment we need to change the connection method
from git to https.

    sed -i 's/git@git.kumina.nl:/https:\/\/git.kumina.nl\//' kibanana-project/buildout.cfg

Now install zc.buildout and run buildout. Note: you will be asked for your credentials.

    cd kibanana-project && bin/pip install zc.buildout && bin/buildout -c development.cfg

Copy the configuration file.

    cp /vagrant/kibanana_config.py Kibanana/settings/config.py

And start the kibanana instance.

    bin/django runserver 0.0.0.0:8000

You can now start testing Kibanana. The credentials are in the configuration file.

    /vagrant/src/kibanana-project/Kibanana/settings/config.py
